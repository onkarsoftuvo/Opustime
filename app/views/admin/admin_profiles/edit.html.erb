<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Profile
    </h1>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="row">
      <div class="col-md-6">
        <div class="box box-primary" style="float: left;">
          <div class="box-header with-border">
            <div style="float:left; width:100%;">
              <h3 class="box-title">Edit Profile</h3>
            <div id="notice1" >
        
              <div class="isa_success hidden custom_succes" id="success_notice">
                <i class="fa fa-check" ></i>
                <%= flash.now[:success] %>
              </div>

              <div class="isa_error hidden custom_error" id="error_notice">
                <i class="fa fa-times-circle"></i>
                <%= flash.now[:error] %>
              </div>
            </div>
          </div>
          </div>

          <%= form_for(@owner, url: '/admin/admin_profiles' , :method => :put, html: {:class => "box-body", :multipart => true}) do |form| %>
              <div class="form-group">
                <%= form.label :First_Name, :class => "control-label" %>
                <%= form.text_field :first_name, :required => true, :class => "form-control" %>
              </div>
              <div class="form-group">
                <%= form.label :Last_Name, :class => "control-label" %>
                <%= form.text_field :last_name, :required => true, :class => "form-control" %>
              </div>
              <div class="form-group">
                <%= form.label :Email_ID, :class => "control-label" %>
                <%= form.email_field :email, :required => true, :class => "form-control" %>
              </div>

              <div class="form-group">
                <%= form.label :Password, :class => "control-label" %>
                <%= form.password_field :password, :class => "form-control" %>
              </div>

              <div class="form-group">
                <%= form.label :Password_Confirm, :class => "control-label" %>
                <%= form.password_field :password_confirmation, :class => "form-control" %>
              </div>

              <%= form.hidden_field :is_owner, :value => "admin" %>
              <div class="box-footer">
                <%= link_to "/admin_panel/view", class: "btn btn-default" do %> Cancel
                <% end %>

                <%= form.submit "Save", class: "btn btn-info pull-right" %>
              </div>


              </div>
              <!-- /.box -->
              </div>
              <div class="col-md-4">
                <div class="box box-primary">
                  <div class="box-header with-border">
                    <h3 class="box-title">Add Profile Image</h3>
                  </div>
                  <p style="color:green;" id="notice"><%= flash[:notice] %></p>

                  <p style="color:red;" id="warning"><%= flash[:alert] %></p><br>
                  <div style="margin-left:30%;">

                  <% if @owner.class.to_s.eql?('Owner') %>
                      <%= image_tag @current_owner.try(:logo).present? ? @current_owner.logo.url(:thumb) : 'default_admin', {class: "user-image", style:"max-width: 125px;"} %>
                  <% else %>
                      <%= image_tag @current_owner.try(:image).present? ? @current_owner.image.url(:thumb) : 'default_admin', {class: "user-image", style:"max-width: 125px;"} %>
                  <% end %>
                  </div>

                  <div style="text-align: center; padding: 10px 10px;">
                    <% unless @owner.nil? %>
                        <% if @owner.class.to_s.eql?('Owner') %>
                            <%= form.file_field :logo, onsubmit: "validate();",
                                                data: {max_file_size: 5.megabytes},
                                                style: "display: inline-table"; %>
                        <% else %>
                            <%= form.file_field :image, onsubmit: "validate();",
                                                data: {max_file_size: 5.megabytes},
                                                style: "display: inline-table"; %>
                        <% end %>

                    <% end %>
                  <% end %>
                </div>

          </div>
          <!-- /.box -->
          </div>
          <!-- /.col -->
          </div>
    <!-- /.row -->
  </section>
  <!-- /.content -->
</div>

<!-- ./wrapper -->


<!-- page script -->
<script>

    $("#notice").fadeOut(5000);
    $("#warning").fadeOut(5000);

//    $("#owner_logo").change(function () {
//
//        var val = $(this).val();
//
//        switch (val.substring(val.lastIndexOf('.') + 1).toLowerCase()) {
//            case 'gif':
//            case 'jpg':
//            case 'png':
//                //alert("an image");
//                break;
//            default:
//                $(this).val('');
//                // error message here
//                alert("not an image");
//                break;
//        }
//    });


    $(document).ready(function () {
        $('#upload').bind("click", function () {
            var imgVal = $('#owner_logo').val();
            if (imgVal == '') {
                alert("Chose the file first");

            }
            //return false;
        });
    });
</script>


<script>
    $(document).ready(function () {
        if (<%= flash[:error].present? %>) {
            $('#error_notice').removeClass('hidden');
            $('#error_notice').delay(5000).fadeOut(400);
        } else if (<%= flash[:success].present? %>) {
            $('#success_notice').removeClass('hidden');
            $('#success_notice').delay(5000).fadeOut(400);

        }

    });
</script>

<!-- <script>
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $('#ShowImage')
          .attr('src', e.target.result)
          .width(50)
          .height(20);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }
</script> -->