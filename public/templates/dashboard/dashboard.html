<div class="dashboard_con">
  <header>
  <div class="col-md-12">
    <div class="col-md-6">
      <h3>{{'dashboard.Welcome_Back' | translate:translationData}} {{dashboardCon.current_user}}<span><i class="fa fa-map-marker" ng-if="city!=null && country != null"></i> {{city}} {{country}}</span></h3>
    </div>
    <div class="col-md-6 text-right">
      <select class="form-control" ng-options="bus.id as bus.name for bus in allLocations" ng-model="dashboardBusiness" ng-change="updateBusiness(dashboardBusiness)">
      </select>
      <div class="dash_date">
      {{getDay(currentDate)}} {{getMonthName(currentDate)}} {{currentDate | date:'yyyy'}}
      </div>
      <div class="dash_arrow">
        <a href="" class="pre" ng-click="preDateDash()"></a>
        <a href="" class="next" ng-click="nextDateDash()"></a>
      </div>
    </div>
  </div>
  </header>
  <div class="dashboard_body">
      <div class="dashboard_overview" ng-if="permissions.top">
        <ul>
          <li class="booking_icn">
            <h4>{{dashboardCon.booking_info.total_booking}}<span ng-class="{'increase' : dashboardCon.booking_info.mode == 'up' , 'decrease' : dashboardCon.booking_info.mode == 'down', 'stable' : dashboardCon.booking_info.mode == 'stable'}" title="{{dashboardCon.booking_info.mode}}">({{dashboardCon.booking_info.percentage_info}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'sidebar_menu.Booking' | translate:translationData}}</p>
            <span class="tooltip">{{'dashboard.appTootip' | translate:translationData}}</span>
          </li>
          <li class="revenue_icn">
            <h4>${{dashboardCon.revenue_info.total_revenues}}<span ng-class="{'increase' : dashboardCon.revenue_info.mode == 'up' , 'decrease' : dashboardCon.revenue_info.mode == 'down', 'stable' : dashboardCon.revenue_info.mode == 'stable'}" title="{{dashboardCon.revenue_info.mode}}">({{dashboardCon.revenue_info.percentage_info}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'sidebar_menu.Revenue' | translate:translationData}}</p>
            <span class="tooltip">{{'dashboard.revTooltip' | translate:translationData}}</span>
          </li>
          <li class="patient_icn">
            <h4>{{dashboardCon.patient_info.total_patients}}<span ng-class="{'increase' : dashboardCon.patient_info.mode == 'up' , 'decrease' : dashboardCon.patient_info.mode == 'down', 'stable' : dashboardCon.patient_info.mode == 'stable'}" title="{{dashboardCon.patient_info.mode}}">({{dashboardCon.patient_info.percentage_info}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'appointment.patient' | translate:translationData}}s</p>
            <span class="tooltip">{{'dashboard.patientTooltip' | translate:translationData}}</span>
          </li>
          <li class="booking_icn">
            <h4>{{dashboardCon.appointment_info.total_appointments}}<span ng-class="{'increase' : dashboardCon.appointment_info.mode == 'up' , 'decrease' : dashboardCon.appointment_info.mode == 'down', 'stable' : dashboardCon.appointment_info.mode == 'stable'}" title="{{dashboardCon.appointment_info.mode}}">({{dashboardCon.appointment_info.percentage_info | number : 2}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'sidebar_menu.appointments' | translate:translationData}}</p>
            <span class="tooltip">{{'dashboard.totalAppTooltip' | translate:translationData}}</span>
          </li>
          <li class="expense_icn">
            <h4>${{dashboardCon.expense_info.total_expenses}}<span ng-class="{'increase' : dashboardCon.expense_info.mode == 'up' , 'decrease' : dashboardCon.expense_info.mode == 'down', 'stable' : dashboardCon.expense_info.mode == 'stable'}" title="{{dashboardCon.expense_info.mode}}">({{dashboardCon.expense_info.percentage_info}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'sidebar_menu.expenses' | translate:translationData}}</p>
            <span class="tooltip">{{'dashboard.expTooltip' | translate:translationData}}</span>
          </li>
          <li class="product_icon">
            <h4>{{dashboardCon.product_info.total_products}}<span ng-class="{'increase' : dashboardCon.product_info.mode == 'up' , 'decrease' : dashboardCon.product_info.mode == 'down', 'stable' : dashboardCon.product_info.mode == 'stable'}" title="{{dashboardCon.product_info.mode}}">({{dashboardCon.product_info.percentage_info}}%)<i class="fa fa-caret-up"></i></span></h4>
            <p>{{'product.main_heading' | translate:translationData}}</p>
            <span class="tooltip">{{'dashboard.proTooltip' | translate:translationData}}</span>
          </li>
        </ul>
        <div class="clearfix"></div>
      </div>
      <div class="dashboard-content">
        <div class="row">
          <div class="col-md-6">
            <div class="chart-con" ng-if="permissions.report">
              <div class="chart_heading">
                {{'dashboard.Appointment_Reports' | translate:translationData}}
                <a href="" class="pre" ng-click="preOffset()" ng-class="{'disableMin' : disableMin}"></a>
                <a href="" class="next" ng-click="nextOffset()" ng-class="{'disableMin' : !isNext}"></a>
              </div>
              <div class="chart_bar">
                <div id="chart" style="height: 400px;"><svg></svg></div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="chart-con" ng-if="permissions.chart_practi">
              <div class="chart_heading">
                {{'dashboard.Sales_Chart_Practitioners' | translate:translationData}}
                <a href="" class="pre" ng-click="preSaleOffset()" ng-class="{'disableMin' : disableSaleMin}"></a>
                <a href="" class="next" ng-click="nextSaleOffset()" ng-class="{'disableMin' : !isNextSale}"></a>
              </div>
              <div class="chart_bar">
                <div id="saleChart" style="height: 400px;"><svg></svg></div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="sales_chart" ng-if="permissions.chart_product">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="dashboard_sales"><h4>{{'dashboard.Sales_Chart_Products_Services' | translate:translationData}}</h4></div>
                      <div class="clearfix"></div>
                      <div class="text-center noDataFound" ng-if="totalSales==0">{{'label.No_Data_Found' | translate:translationData}}</div>
                      <canvas id="pie" class="chart chart-pie" chart-data="salesOverallChart.data" chart-labels="salesOverallChart.labels" chart-legend="false" chart-options="salesOverallChart.chart_options"></canvas>
                    </div>
                    <div class="col-md-6">
                      <div class="dashboard_sales"><h4>{{'dashboard.Sales_Chart_services' | translate:translationData}}</h4></div>
                      <div class="text-center noDataFound" ng-if="totalService==0">{{'label.No_Data_Found' | translate:translationData}}</div>
                      <canvas id="pie" class="chart chart-pie" chart-data="salesServiceChart.data" chart-labels="salesServiceChart.labels" chart-legend="false" chart-options="salesServiceChart.chart_options"></canvas>
                      <div class="clearfix"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <div class="col-md-6 appointment_bar" ng-if="permissions.appointment">
                <div class="appointments">
                  <div class="app_header">
                    {{'sidebar_menu.appointments' | translate:translationData}}
                    <span class="pull-right">{{'payment.total' | translate:translationData}} : <span>{{totalApps}} </span></span>
                  </div>
                  <div class="appointments_body" ng-scrollbars rebuild-on-resize>
                    <div class="">
                      <div class="no_dashappointment" ng-if="appointmentRecord.length == 0">{{'dashboard.No_Appointment_Yet' | translate:translationData}}</div>
                      <div class="app_sec" ng-repeat="app in appointmentRecord">
                        <div class="time_bar">
                          <div class="fix_time">
                            <h3>{{app.time_period}}</h3>
                            <h5>{{app.meridian}}</h5>
                          </div>
                        </div>
                        <div class="list_bar">
                          <ul>
                            <li ng-repeat="appointments in app.appnts" ng-class="{'currentApp' : appointments.high_light}">
                              <h5 ui-sref="patient-detail({'patient_id' : appointments.patient_id})">
                                <span style="background-color:{{appointments.color_code}}"></span>
                                {{appointments.patient_name}}
                              </h5>
                              <h6>{{'dashboard.with' | translate:translationData}} {{appointments.doctor_name}}</h6>
                              <p ng-click="openAppointment(appointments.appointment_id)">{{appointments.start_at}} to {{appointments.end_at}}</p>
                              <span class="status " ng-class="{'arrived' : appointments.appnt_status == 'A', 'not_arrived' : appointments.appnt_status == 'NA', 'canceled' : appointments.appnt_status == 'C'}">{{appointments.appnt_status}}</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 activity_con" ng-if="permissions.activity">
                <div class="appointments">
                  <div class="app_header">
                    {{'dashboard.Activity' | translate:translationData}}
                  </div>
                  <div class="activity_tabs">
                    <a href="" ng-class="{'active' : app_activity}" ng-click="openApp()"><i class="app"></i><span>{{'dashboard.Bookings' | translate:translationData}}</span></a>
                    <a href="" ng-class="{'active' : invoice_activity}" ng-click="openInc()"><i class="inv"></i><span>{{'sidebar_menu.invoices' | translate:translationData}}</span></a>
                    <a href="" ng-class="{'active' : payment_activity}" ng-click="openPayment()"><i class="payment_icon"></i><span>{{'label.Payments' | translate:translationData}}</span></a>
                    <a href="" ng-class="{'active' : expense_activity}" ng-click="openExpense()"><i class="exp"></i><span>{{'sidebar_menu.expenses' | translate:translationData}}</span></a>
                    <a href="" ng-class="{'active' : sms_activity}" ng-click="openSms()"><i class="sms_icon"></i><span>{{'sidebar_menu.sms' | translate:translationData}}</span></a>
                  </div>
                  <div class="activty_body" ng-scrollbars rebuild-on-resize>
                    <ul ng-if="app_activity">
                      <li class="noLog" ng-if="activityLogs[3].data.data == false">
                        <p>{{'dashboard.No_Logs_Available' | translate:translationData}}</p>
                      </li>
                      <li ng-repeat="appLog in activityLogs[3].data">
                        <p ng-if="appLog.action == 'create'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span ng-if="appLog.total_appnts == 1">{{'dashboard.Created_appointment' | translate:translationData}} </span> <span ng-if="appLog.total_appnts > 1">{{'dashboard.Created_recuring_appointments' | translate:translationData}} <b>({{appLog.total_appnts}})</b> </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.on' | translate:translationData}} <b>{{appLog.booking_time}}</b> {{'dashboard.with' | translate:translationData}} <b>{{appLog.doctor_name}}</b>
                        </p>
                        <p ng-if="appLog.action == 'Reschedule'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red">{{'dashboard.Rescheduled_appointment' | translate:translationData}} </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.from' | translate:translationData}} <b>{{appLog.old_date}} {{appLog.old_bk_str_time}} - {{appLog.old_bk_end_time}}</b> {{'settings.data_export.label_to' | translate:translationData}} <b>{{appLog.new_date}} {{appLog.new_bk_str_time}} - {{appLog.new_bk_end_time}}</b> {{'dashboard.with' | translate:translationData}} <b>{{appLog.doctor_name}}</b>
                        </p>
                        <p ng-if="appLog.action == 'Cancel'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red">Cancelled appointment (reason {{appLog.cancel_reason}}) </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.on' | translate:translationData}} <b>{{appLog.booking_time}}</b> {{'dashboard.with' | translate:translationData}} <b>{{appLog.doctor_name}}</b>
                        </p>
                        <p ng-if="appLog.action == 'update'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red" ng-if="appLog.total_appnts == 1">{{'dashboard.modified_appointment' | translate:translationData}} </span> <span class="red" ng-if="appLog.total_appnts > 1">{{'dashboard.modified_recuring_appointments' | translate:translationData}} </span> <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a>   {{'dashboard.on' | translate:translationData}} <b>{{appLog.booking_time}}</b> {{'dashboard.with' | translate:translationData}} <b>{{appLog.doctor_name}}</b>
                        </p>
                        <p ng-if="appLog.action == 'appnt_status'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red">updated appointment status </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.from' | translate:translationData}} <b>{{appLog.old_appnt_status}}</b> {{'to' | translate:translationData}} <b>{{appLog.new_appnt_status}}</b>
                        </p>
                        <p ng-if="appLog.action == 'patient_status'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red">updated patient status </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.from' | translate:translationData}} <b>{{appLog.old_patient_status}}</b> {{'to' | translate:translationData}} <b>{{appLog.new_patient_status}}</b>
                        </p>
                        <p ng-if="appLog.action == 'delete'">
                          {{appLog.created_at}} - <b>{{appLog.creator}}</b> <span class="red" ng-if="appLog.total_appnts == 1">{{'Deleted appointment' | translate:translationData}} </span> <span class="red" ng-if="appLog.total_appnts > 1">{{'Deleted recuring appointments' | translate:translationData}} <b>({{appLog.total_appnts}})</b> </span> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : appLog.patient_id})"><b>{{appLog.patient_name}}</b></a> {{'dashboard.on' | translate:translationData}} <b>{{appLog.booking_time}}</b> {{'dashboard.with' | translate:translationData}} <b>{{appLog.doctor_name}}</b>
                        </p>
                      </li>
                    </ul>
                    <ul ng-if="invoice_activity">
                      <li class="noLog" ng-if="activityLogs[0].data.data == false">
                        <p>{{'dashboard.No_Logs_Available' | translate:translationData}}</p>
                      </li>
                      <li ng-repeat="inLog in activityLogs[0].data">
                        <p ng-if="inLog.action == 'create'">
                          {{inLog.created_at}} - <b>{{inLog.creator}}</b> <span>{{'dashboard.Created_Invoice' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.invoiceView({'invoice_id' : inLog.obj_id, 'patient_id' : inLog.patient_id})"><b>{{inLog.obj_id}}</b></a> {{'dashboard.with' | translate:translationData}} <b>${{inLog.total}} {{'payment.total' | translate:translationData}}</b> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : inLog.patient_id})"><b>{{inLog.patient_name}}</b> </a>
                        </p>
                        <p ng-if="inLog.action == 'update'">
                          {{inLog.created_at}} - <b>{{inLog.creator}}</b> <span class="red">{{'dashboard.modified_inv' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.invoiceView({'invoice_id' : inLog.obj_id, 'patient_id' : inLog.patient_id})"><b>{{inLog.obj_id}}</b></a> <i ng-if="inLog.old_amount != null && inLog.new_amount != null">{{'dashboard.from' | translate:translationData}} <b>${{inLog.old_amount}} {{'appointment.to' | translate:translationData}} ${{inLog.new_amount}}</b></i> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : inLog.patient_id})"><b>{{inLog.patient_name}}</b> <b>on {{inLog.issue_date}}</b> </a>
                        </p>
                        <p ng-if="inLog.action == 'delete'">
                          {{inLog.created_at}} - <b>{{inLog.creator}}</b> <span class="red">{{'deleted Invoice' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.invoiceView({'invoice_id' : inLog.obj_id, 'patient_id' : inLog.patient_id})"><b>{{inLog.obj_id}}</b></a> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : inLog.patient_id})"><b>{{inLog.patient_name}}</b> </a>
                        </p>
                      </li>
                    </ul>
                    <ul ng-if="payment_activity">
                      <li class="noLog" ng-if="activityLogs[1].data.data == false">
                        <p>{{'dashboard.No_Logs_Available' | translate:translationData}}</p>
                      </li>
                      <li ng-repeat="payLog in activityLogs[1].data">
                        <p ng-if="payLog.action == 'create'">
                          {{payLog.created_at}} - <b>{{payLog.creator}}</b> <span>{{'dashboard.Created_Payment' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.paymentView({'payment_id' : payLog.obj_id, 'patient_id' : payLog.patient_id})"><b>{{payLog.obj_id}}</b></a> of <b>${{payLog.total}} {{payLog.payment_methods}}</b> {{'dashboard.for_invoice' | translate:translationData}} <b ng-repeat="usedInvoice in payLog.used_invoices"><a href="" ui-sref="patient-detail.invoiceView({'invoice_id' : usedInvoice.inv_id, 'patient_id' : payLog.patient_id})">{{usedInvoice.inv_id}}</a> <i ng-if="$index != payLog.used_invoices.length - 1">,</i></b> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : payLog.patient_id})"><b>{{payLog.patient_name}}</b> </a>
                        </p>
                        <p ng-if="payLog.action == 'update'">
                          {{payLog.created_at}} - <b>{{payLog.creator}}</b> <span class="red">{{'dashboard.modified_Payment' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.paymentView({'payment_id' : payLog.obj_id, 'patient_id' : payLog.patient_id})"><b>{{payLog.obj_id}}</b></a> <i ng-if="payLog.new_amount != null && payLog.old_amount != null">{{'dashboard.from' | translate:translationData}} <b>${{payLog.old_amount}} {{'settings.data_export.label_to' | translate:translationData}} ${{payLog.new_amount}} Total</b> {{'dashboard.for_invoice'| translate:translationData}} <b ng-repeat="usedInvoice in payLog.used_invoices"><a href="" ui-sref="patient-detail.invoiceView({'invoice_id' : usedInvoice.inv_id, 'patient_id' : payLog.patient_id})">{{usedInvoice.inv_id}}</a> <i ng-if="$index != payLog.used_invoices.length - 1">,</i></b></i> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : payLog.patient_id})"><b>{{payLog.patient_name}}</b> </a>
                        </p>
                        <p ng-if="payLog.action == 'delete'">
                          {{payLog.created_at}} - <b>{{payLog.creator}}</b> <span class="red">{{'deleted Payment' | translate:translationData}} </span> <a href="" ui-sref="patient-detail.paymentView({'payment_id' : payLog.obj_id, 'patient_id' : payLog.patient_id})"><b>{{payLog.obj_id}}</b></a> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="patient-detail({'patient_id' : payLog.patient_id})"><b>{{payLog.patient_name}}</b> </a>
                        </p>
                      </li>
                    </ul>
                    <ul ng-if="expense_activity">
                      <li class="noLog" ng-if="activityLogs[2].data.data == false">
                        <p>{{'dashboard.No_Logs_Available'| translate:translationData}}</p>
                      </li>
                      <li ng-repeat="exLog in activityLogs[2].data">
                        <p ng-if="exLog.action == 'create'">
                          {{exLog.created_at}} - <b>{{exLog.creator}}</b> <span>{{'dashboard.Created_Expense' | translate:translationData}} </span>  <a href="" ui-sref="expense.edit({'ex_id' : exLog.obj_id})"><b>{{exLog.obj_id}}</b></a> {{'dashboard.of' | translate:translationData}} <b>${{exLog.total}}</b> <i ng-if="exLog.include_tax">including tax</i> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="settings.business.info({'business_id' : exLog.business_id})"><b>{{exLog.business_name}}</b> </a>
                        </p>
                        <p ng-if="exLog.action == 'update'">
                          {{exLog.created_at}} - <b>{{exLog.creator}}</b> <span class="red">{{'dashboard.modified_Expense' | translate:translationData}} </span> <a href="" ui-sref="expense.edit({'ex_id' : exLog.obj_id})"><b>{{exLog.obj_id}}</b></a> <i ng-if="exLog.new_amount != null && exLog.old_amount != null">{{'dashboard.from' | translate:translationData}} <b>${{exLog.old_amount}} {{'settings.data_export.label_to' | translate:translationData}} ${{exLog.new_amount}} {{'payment.total' | translate:translationData}}</b> </i> <i ng-if="exLog.include_tax">{{'dashboard.including_tax' | translate:translationData}}</i> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="settings.business.info({'business_id' : exLog.business_id})"><b>{{exLog.business_name}}</b> </a>
                        </p>
                        <p ng-if="exLog.action == 'delete'">
                          {{exLog.created_at}} - <b>{{exLog.creator}}</b> <span class="red">{{'deleted Expense' | translate:translationData}} </span> <a href="" ui-sref="expense.edit({'ex_id' : exLog.obj_id})"><b>{{exLog.obj_id}}</b></a> {{'appointment.for' | translate:translationData}} <a href="" ui-sref="settings.business.info({'business_id' : exLog.business_id})"><b>{{exLog.business_name}}</b> </a>
                        </p>
                      </li>
                    </ul>
                    <ul ng-if="sms_activity">
                      <li class="noLog" ng-if="activityLogs[4].data.data == false">
                        <p>{{'dashboard.No_Logs_Available' | translate:translationData}}</p>
                      </li>
                      <li ng-repeat="smsLog in activityLogs[4].data">
                        <p ng-if="smsLog.sms_status == 'Delivered'">
                          {{smsLog.created_at}} - <b>{{smsLog.sender_name}}</b> <span>{{'dashboard.Send_SMS_Delivered' | translate:translationData}}</span> {{'settings.data_export.label_to' | translate:translationData}} 
                          <a href="" ui-sref="patient-detail.sendSms({'patient_id' : smsLog.receiver_id, 'phone_no' : smsLog.dsg_no})"><b>{{smsLog.receiver_name}} ({{smsLog.dsg_no}})</b></a>
                        </p>
                        <p ng-if="smsLog.sms_status == 'Failed'">
                          {{smsLog.created_at}} - <b>{{smsLog.sender_name}}</b> <span class="red">{{'dashboard.Send_SMS_Failed' | translate:translationData}}</span> {{'settings.data_export.label_to' | translate:translationData}} 
                          <a href="" ui-sref="patient-detail({'patient_id' : smsLog.receiver_id})"><b>{{smsLog.receiver_name}} ({{smsLog.dsg_no}})</b></a>
                        </p>  
                        <p ng-if="smsLog.sms_status == 'Received'">
                          {{smsLog.created_at}} - <span class="pink">{{'dashboard.SMS_Received_From' | translate:translationData}}</span> 
                          <a href="" ui-sref="settings.users.info({'user_id' : smsLog.sender_id})" ng-if="smsLog.sender_type == 'User'"><b>{{smsLog.sender_name}} ({{smsLog.dsg_no}})</b></a>
                          <a href="" ui-sref="patient-detail.sendSms({'patient_id' : smsLog.sender_id, 'phone_no' : smsLog.dsg_no})" ng-if="smsLog.sender_type == 'Patient'"><b>{{smsLog.sender_name}} ({{smsLog.dsg_no}})</b></a>
                          <a href="" ui-sref="contact.sendSMS({'contact_id' : smsLog.sender_id, 'phone_no' : smsLog.dsg_no})" ng-if="smsLog.sender_type == 'Contact'"><b>{{smsLog.sender_name}} ({{smsLog.dsg_no}})</b></a>
                          <label ng-if="smsLog.sender_type == null"><b>{{smsLog.sender_name}} Number</b></label>
                        </p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="message-box">
                  <div class="message_header">
                    {{'dashboard.Message_Board' | translate:translationData}}
                    <button class="btn btn-primary pull-right" ng-click="newPost()" ng-if="!newMessage">{{'dashboard.New_Post' | translate:translationData}}</button>
                    <button class="btn btn-primary pull-right" ng-if="newMessage" ng-click="cancelNew()">{{'button.cancel' | translate:translationData}}</button>
                    <button class="btn btn-primary pull-right" ng-if="newMessage && !updatePost" type="submit" form="postForm">{{'dashboard.Post' | translate:translationData}}</button>
                    <button class="btn btn-primary pull-right" ng-if="newMessage && updatePost" type="submit" form="postForm">{{'button.update' | translate:translationData}}</button>
                  </div>
                  <div class="message_form" ng-if="newMessage">
                      <form ng-submit="postForm.$valid && savePost(post)" novalidate name="postForm" id="postForm">
                        <div class="form-group">
                          <label>{{'patient_detail.Subject' | translate:translationData}}</label>
                          <input type="text" name="" class="form-control" ng-model="post.title" required>
                        </div>
                        <div class="form-group">
                          <label>{{'communication.message' | translate:translationData}}</label>
                          <textarea class="form-control" placeholder="Enter Message" ng-model="post.content" required></textarea>
                        </div>
                      </form>
                    </div>
                  <div class="post_con" ng-scrollbars rebuild-on-resize>
                    <div class="text-center" ng-if="postList.length == 0">{{'dashboard.No_Post_Found' | translate:translationData}}</div>
                    <div class="mess_con" ng-repeat="post in postList">
                      <h4 class="pull-left">{{post.title}}! <span>{{post.posted_at}} {{'dashboard.PostedBy' | translate:translationData}} {{post.posted_by}}</span></h4>
                      <div class="btns pull-right">
                        <p class="action">
                          <a href="" ng-click="editPost(post.id)"><i class="fa fa-edit"></i></a>
                          <a href="" ng-click="openPostPopup(post.id)"><i class="fa fa-trash"></i></a>
                        </p>
                      </div>
                      <div class="clearfix"></div>
                      <p>{{post.content}}</p>
                      <p class="posted_by" ng-repeat="comments in post.comments">{{comments.body}}
                        <span>{{'dashboard.Comment_by' | translate:translationData}} {{comments.created_by}}
                          <a href="" ng-click="openCommentPopup(post.id , comments.comment_id)"><i class="fa fa-trash"></i></a>
                        </span>
                      </p>
                      <div class="textbox-con">
                       <form>
                          <textarea ng-model="post.postmessage" placeholder="Comment..." class="form-control"></textarea>
                          <button type="submit" form="commentForm" ng-click="saveCommnet(post)"></button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row other_report">
          <div class="col-md-12" ng-if="dashboardCon.graph_options.appnt || dashboardCon.graph_options.doctor || dashboardCon.graph_options.refer_src || dashboardCon.graph_options.revenue || dashboardCon.graph_options.daily">
            <h4>{{'dashboard.Other_Reports' | translate:translationData}}</h4>
          </div>
          <div class="col-md-6" ng-show="dashboardCon.graph_options.appnt">
            <div class="chart-con">
              <div class="chart_heading">
                {{'sidebar_menu.appointments' | translate:translationData}}
                <a href="" class="close pull-right" ng-click="crossGraph('appnt')"><i class="fa fa-times"></i></a>
                <button class="btn btn-primary pull-right" ng-click="showWeek()" ng-class="{'active' : activeBtn == 0}">{{'button.Week' | translate:translationData}}</button>
                <button class="btn btn-primary pull-right" ng-click="showMonth()" ng-class="{'active' : activeBtn == 1}">{{'button.Month' | translate:translationData}}</button>
                <button class="btn btn-primary pull-right" ng-click="showYear()" ng-class="{'active' : activeBtn == 2}">{{'button.Yearly' | translate:translationData}}</button>
              </div>
              <div class="">
                <div class="chart_menu">
                  <div class="chart_date">
                    <a href="" class="left" ng-click="preDate(chartDate)"></a>
                    <div class="chart_date_inner">
                      {{firstday | date:'dd'}} {{getMonthName(firstday)}} {{firstday | date:'yyyy'}} - {{lastday | date:'dd'}} {{getMonthName(lastday)}} {{lastday | date:'yyyy'}}
                      <button ng-click="showAppPicker()"><i class="fa fa-calendar"></i></button>
                      <div class="chart_date_picker smallDatePicker " ng-show="showAppDatePicker">
                        <uib-datepicker ng-model="chartDate" class="calendar well well-sm" datepicker-options="inlineOptionss" ng-change="updateChart(chartDate)" show-weeks="false" id="calendar"></uib-datepicker>
                      </div>
                    </div>
                    <a href="" class="right" ng-click="nextDate(chartDate)"></a>
                  </div>
                  <select class="form-control" ng-model="type" ng-change="getChartData()">
                    <option value="summary">{{'appointment.Summary' | translate:translationData}}</option>
                    <option value="appointment_type">{{'appointment.appType' | translate:translationData}}</option>
                    <option value="doctor">{{'appointment.practitioner' | translate:translationData}}</option>
                    <option value="business">{{'appointment.bussieness' | translate:translationData}}</option>
                  </select>
                  <div class="totalCount">
                    <h6>{{weekCount}} {{'reports.Weekly_Appointments_avg' | translate:translationData}}</h6>
                    <h6>{{monthCount}} {{'reports.Monthly_Appointments_avg' | translate:translationData}}</h6>
                    <h6>{{yearCount}} {{'reports.Yearly_Appointments_avg' | translate:translationData}}</h6>
                  </div>
                  <div class="chart_canvas">
                    <canvas id="line" class="chart chart-line" chart-data="barChart.data"
                      chart-labels="barChart.labels" colours="colours" chart-fontStyle="bold" chart-legend="true" chart-options="chart_options" chart-series="barChart.series" chart-click="onClick" >
                    </canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" ng-show="dashboardCon.graph_options.doctor">
            <div class="chart-con">
              <div class="chart_heading">
                {{'appointment.practitioner' | translate:translationData}}
                <a href="" class="close pull-right" ng-click="crossGraph('dc')"><i class="fa fa-times"></i></a>
              </div>
              <div class="">
                <div class="chart_menu">
                  <select class="form-control" ng-model="charttype" ng-change="getPieData()" style="width:170px;">
                    <option value="atype">{{'appointment.appType' | translate:translationData}}</option>
                    <option value="loc">{{'patient_detail.Business' | translate:translationData}}</option>
                    <option value="item">{{'settings.top_links.billable_items' | translate:translationData}}</option>
                  </select>
                  <div class="chart_canvas">
                    <canvas id="pie" class="chart chart-pie" chart-data="pieChart.data" chart-labels="pieChart.labels" chart-legend="true" chart-options="pieChart_options"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" ng-show="dashboardCon.graph_options.refer_src">
            <div class="chart-con">
              <div class="chart_heading">
                {{'settings.referral.main_heading' | translate:translationData}}
                <a href="" class="close pull-right" ng-click="crossGraph('refer_type')"><i class="fa fa-times"></i></a>
              </div>
              <div class="">
                <div class="chart_menu">
                  <div class="form-group date_pickers">
                    <input type="text" class="form-control" placeholder="YYYY-MM-DD" uib-datepicker-popup="{{format}}" is-open="graphFromDate.open" max-date="graphfilter.to" datepicker-options="dateOptions" ng-click="openFromDate($event)" ng-model="graphfilter.from" show-button-bar="false" show-weeks="false">
                    <input type="text" class="form-control" placeholder="YYYY-MM-DD" uib-datepicker-popup="{{format}}" is-open="graphToDate.open" min-date="graphfilter.from" datepicker-options="dateOptions" ng-click="openToDate($event)" ng-model="graphfilter.to" show-button-bar="false" show-weeks="false">
                  </div>
                  <button class="pull-right apply" ng-click="filterGraph(graphfilter)">{{'dashboard.Filter' | translate:translationData}}</button>
                  <div class="chart_canvas">
                    <div class="text-center no_record" ng-if="totalCount==0">{{'label.No_Data_Found' | translate:translationData}}</div>
                    <canvas id="pie" class="chart chart-pie" chart-data="refPieChart.data" chart-labels="refPieChart.labels" chart-legend="true" chart-options="refChart_options"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" ng-show="dashboardCon.graph_options.revenue">
            <div class="chart-con">
              <div class="chart_heading">
                {{'sidebar_menu.Revenue' | translate:translationData}}
                <a href="" class="close pull-right" ng-click="crossGraph('revenue')"><i class="fa fa-times"></i></a>
                <button class="btn btn-primary pull-right" ng-click="revshowWeek()" ng-class="{'active' : RevActiveBtn == 0}">{{'button.Week' | translate:translationData}}</button>
                <button class="btn btn-primary pull-right" ng-click="revshowMonth()" ng-class="{'active' : RevActiveBtn == 1}">{{'button.Month' | translate:translationData}}</button>
                <button class="btn btn-primary pull-right" ng-click="revshowYear()" ng-class="{'active' : RevActiveBtn == 2}">{{'button.Yearly' | translate:translationData}}</button>
              </div>
              <div class="">
                <div class="chart_menu">
                  <div class="chart_date">
                    <a href="" class="left" ng-click="revpreDate(revchartDate)"></a>
                    <div class="chart_date_inner">
                      {{revfirstday | date:'dd'}} {{getMonthName(revfirstday)}} {{revfirstday | date:'yyyy'}} - {{revlastday | date:'dd'}} {{getMonthName(revlastday)}} {{revlastday | date:'yyyy'}}
                      <button ng-click="showPicker()"><i class="fa fa-calendar"></i></button>
                      <div class="chart_date_picker smallDatePicker" ng-if="showRevDatePicker">
                        <uib-datepicker ng-model="revchartDate" class="calendar well well-sm" datepicker-options="inlineOptionss" ng-change="updateRevChart(revchartDate)" show-weeks="false" id="calendar"></uib-datepicker>
                      </div>
                    </div>
                    <a href="" class="right" ng-click="revnextDate(revchartDate)"></a>
                  </div>
                  <select class="form-control" ng-model="revType" ng-change="getRevChartData()">
                    <option value="doctor">{{'sidebar_menu.Practitioners' | translate:translationData}}</option>
                    <option value="business">{{'expense.business' | translate:translationData}}</option>
                    <option value="prod">{{'expense.product' | translate:translationData}}</option>
                    <option value="b_item">{{'reports.Services' | translate:translationData}}</option>
                  </select>
                  <select class="form-control" ng-model="revChartFilter" ng-change="getRevChartData()">
                    <option value="0">{{'reports.Open_Invoice' | translate:translationData}}</option>
                    <option value="1">{{'reports.Closed_Invoice' | translate:translationData}}</option>
                    <option value="2">{{'reports.Raised_Invoice' | translate:translationData}}</option>
                  </select>
                  <div class="chart_canvas">
                    <canvas id="line" class="chart chart-line" chart-data="revChart.data"
                      chart-labels="revChart.labels" colours="colours" chart-fontStyle="bold" chart-legend="true" chart-options="chart_options" chart-series="revChart.series" chart-click="onClick" >
                    </canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" ng-show="dashboardCon.graph_options.daily">
            <div class="chart-con">
              <div class="chart_heading">
                {{'dashboard.Daily_Payment_Report' | translate:translationData}}
                <a href="" class="close pull-right" ng-click="crossGraph('daily_report')"><i class="fa fa-times"></i></a>
              </div>
              <div class="">
                <div class="chart_menu">
                  <div class="chart_date">
                    <a href="" class="left" ng-click="dailypreDate(dailychartDate)"></a>
                    <div class="chart_date_inner text-center" style="text-align:left;">
                       {{dailychartDate | date:'dd'}} {{getMonthName(dailychartDate)}} {{dailychartDate | date:'yyyy'}}
                      <button ng-click="showDpicker()"><i class="fa fa-calendar"></i></button>
                      <div class="chart_date_picker smallDatePicker" ng-show="dailyshowDatePicker">
                        <uib-datepicker ng-model="dailychartDate" class="calendar well well-sm" datepicker-options="inlineOptionss" ng-change="dailyupdateChart(dailychartDate)" show-weeks="false" max-date="todayDate" id="calendar"></uib-datepicker>
                      </div>
                    </div>
                    <a href="" class="right" ng-click="dailynextDate(dailychartDate)" ng-if="dontShow"></a>
                  </div>
                  <select class="form-control" ng-model="dailybusiness" ng-change="getdailyChartData()" ng-options="loc.id as loc.name for loc in allLoc">
                  </select>
                  <div class="chart_canvas">
                    <div class="text-center no_record" ng-if="dailytotalCount==0">{{'label.No_Data_Found' | translate:translationData}}</div>
                    <canvas id="pie" class="chart chart-pie" chart-data="dailypieChart.data" chart-labels="dailypieChart.labels" chart-legend="true" chart-options="dailychart_options"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
<div class="subsc_cancel" ng-class="{'dashSubsc_status': dashSubscript_status}">
  <div class="dashboard_con" id="dash_header">
  <header>
      <div class="col-md-6">
        <h3 class="text-capitalize" style="text-align:left">{{'dashboard.Welcome_Back' | translate:translationData}} {{dashboardCon.current_user}} <span ng-if="city!=null && country != null"><i class="fa fa-map-marker"></i> {{city}}, {{country}}</span></h3>
      </div>
      
      <div class="clearfix"></div>
  </header>
  </div>
  <h3 class="no_subs_big">Your Opustime subscription has been cancelled</h3>
  <p>Your administrative users can reactivate your account from the settings area. If you need any assistance, please contact us at Support</p>
</div>

<!-- Modal --> 
<script type="text/ng-template" id="DeletePost.html">
  <div class="modal-body confirm-body">
    <div class="confirm">
      <p>{{'dashboard.delete_post' | translate:translationData}}</p>
      <a href="" ng-click="confirmDelete()">{{'button.confirm' | translate:translationData}}</a>
      <a href="" ng-click="cancel()">{{'button.cancel' | translate:translationData}}</a>
    </div>
  </div>
</script>

<!-- Modal --> 
<script type="text/ng-template" id="DeleteComment.html">
  <div class="modal-body confirm-body">
    <div class="confirm">
      <p>{{'dashboard.delete_comment' | translate:translationData}}</p>
      <a href="" ng-click="deleteComment()">{{'button.confirm' | translate:translationData}}</a>
      <a href="" ng-click="cancel()">{{'button.cancel' | translate:translationData}}</a>
    </div>
  </div>
</script>