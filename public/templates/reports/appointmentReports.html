<div class="reports-con">
  <div class="top-container">
    <div class="col-md-12 top-links" ng-include="'templates/reports/top-bar.html'"></div>
  </div>
  <div class="graph_con" ng-scrollbars rebuild-on-resize rebuild-on="rebuild:me">
    <div class="graph">
      <div class="chart_con">
        <canvas id="line" class="chart chart-line" chart-data="barChart.data"
        chart-labels="barChart.labels" colours="colours" chart-fontStyle="bold" chart-legend="true" chart-options="chart_options" chart-series="barChart.series" chart-click="onClick" >
        </canvas>
      </div>
      <div class="chart_menu">
        <div class="chart_date">
          <a href="" class="left" ng-click="preDate(chartDate)"></a>
          <div class="chart_date_inner">
            {{firstday | date:'dd'}} {{getMonthName(firstday)}} {{firstday | date:'yyyy'}} - {{lastday | date:'dd'}} {{getMonthName(lastday)}} {{lastday | date:'yyyy'}}
            <button ng-click="showPicker()"><i class="fa fa-calendar"></i></button>
            <div class="chart_date_picker" ng-if="showDatePicker">
              <uib-datepicker ng-model="chartDate" class="calendar well well-sm" datepicker-options="inlineOptionss" ng-change="updateChart(chartDate)" show-weeks="false" id="calendar"></uib-datepicker>
            </div>
          </div>
          <a href="" class="right" ng-click="nextDate(chartDate)"></a>
        </div>
        <select class="form-control" ng-model="type" ng-change="getChartData()">
          <option value="summary">{{'appointment.Summary' | translate:translationData}}</option>
          <option value="appointment_type">{{'appointment.appType' | translate:translationData}}</option>
          <option value="doctor">{{'sidebar_menu.Practitioners' | translate:translationData}}</option>
          <option value="business">{{'expense.business' | translate:translationData}}</option>
        </select>
        <div class="chart_btn">
          <button ng-click="showWeek()" ng-class="{'active' : activeBtn == 0}">{{'button.Week' | translate:translationData}}</button>
          <button ng-click="showMonth()" ng-class="{'active' : activeBtn == 1}">{{'button.Month' | translate:translationData}}</button>
          <button ng-click="showYear()" ng-class="{'active' : activeBtn == 2}">{{'button.Yearly' | translate:translationData}}</button>
        </div>
        <div class="totalCount">
          <h6>{{weekCount}} {{'reports.Weekly_Appointments_avg' | translate:translationData}}</h6>
          <h6>{{monthCount}} {{'reports.Monthly_Appointments_avg' | translate:translationData}}</h6>
          <h6>{{yearCount}} {{'reports.Yearly_Appointments_avg' | translate:translationData}}</h6>
        </div>
        <div class="addToDash">
          <h2>{{'reports.Add_to_Dashboard' | translate:translationData}}</h2>
          <label class="on-off">
              <input type="checkbox" ng-model="addDash.appnt" ng-change="addToDashboard(addDash.appnt)">
              <span class="bg"></span>
          </label>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
    <div class="reports_filters">
      <button class="pull-right apply export" ng-click="export()">{{'settings.data_export.label_export' | translate:translationData}}</button>
      <button class="pull-right apply export" ng-click="print()">{{'patient_detail.Print' | translate:translationData}}</button>
      <div class="clearfix"></div>
    </div>
    <div class="reports_filters">
      <label>{{'communication.from' | translate:translationData}}</label>
      <input type="text" name="" placeholder="YYYY-MM-DD" uib-datepicker-popup="{{format}}" is-open="fromDate.opened" min-date="minDate" max-date="filter.to" datepicker-options="dateOptions" ng-click="openFrom($event)" ng-model="filter.from" show-button-bar="false">
      <span class="divider"></span>
      <label>{{'communication.to' | translate:translationData}}</label>
      <input type="text" name="" placeholder="YYYY-MM-DD" uib-datepicker-popup="{{format}}" is-open="toDate.opened" min-date="filter.from" max-date="dobMaxDate" datepicker-options="dateOptions" ng-click="openTo($event)" ng-model="filter.to" show-button-bar="false">

      <div class="arr_con">
        <div class="btn-group" uib-dropdown is-open="statu.isopen">
          <button id="prac_filter" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
            {{'appointment.practitioner' | translate:translationData}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="prac_filter" ng-click="stopEvent($event)">
            <li role="menuitem" ng-repeat="list in allFilters.practitioners">
              <label>
                <input type="checkbox" ng-change="listChange(list)" ng-model="list.ischecked"><span></span> {{list.name}}
              </label>
            </li>
          </ul>
        </div>
      </div>
      <div class="arr_con">
        <div class="btn-group" uib-dropdown is-open="statuss.isopen">
          <button id="service_filter" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
            {{'appointment.appType' | translate:translationData}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="service_filter" ng-click="stopEvent($event)">
            <li role="menuitem" ng-repeat="servList in allFilters.services">
              <label>
                <input type="checkbox" ng-model="servList.ischecked"><span></span> {{servList.name}}
              </label>
            </li>
          </ul>
        </div>
      </div>
      <div class="arr_con">
        <div class="btn-group" uib-dropdown is-open="status.isopen">
          <button id="business_filter" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
            {{'invoice.business' | translate:translationData}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="business_filter" ng-click="stopEvent($event)">
            <li role="menuitem" ng-repeat="buslist in allFilters.locations">
              <label>
                <input type="checkbox" ng-model="buslist.ischecked"><span></span> {{buslist.name}}
              </label>
            </li>
          </ul>
        </div>
      </div>
      <div class="arr_con filter_check">
        <label>
          <input type="checkbox" name="" ng-model="filter.missedApp"><span></span> {{'reports.Missed Appointments' | translate:translationData}}
        </label>
      </div>
      <button class="pull-right apply" ng-click="allAppointmentsData()">{{'button.Clear' | translate:translationData}}</button>
      <button class="pull-right apply" ng-click="allAppointments(filter)">{{'button.Apply' | translate:translationData}}</button>
      <div class="clearfix"></div>
    </div>
    <div class="table-responsive reports-table">
     <table datatable="ng" class="table table-hover" dt-options="dtOptions" dt-column-defs="dtColumnDefs">
        <thead>
          <tr>
              <th style="width:220px;">{{'expense.label_date' | translate:translationData}}</th>
              <th>{{'communication.patient' | translate:translationData}}</th>
              <th>{{'payment.practitioner' | translate:translationData}}</th>
              <th>{{'expense.label.Service_Type' | translate:translationData}}</th>
              <th>{{'patient_detail.contactNo' | translate:translationData}}</th>
              <th>{{'label.email_address' | translate:translationData}}</th>
              <th>{{'label.Business_Location' | translate:translationData}}</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="app in allAppointmentsList">
            <td>
              <span ng-if="app.appnt_date == null">{{'label.not_available' | translate:translationData}}</span>
              {{app.appnt_date | date: 'dd/MM/yyyy'}} {{app.apnt_time}}
            </td>
            <td>
              <a href="" ui-sref="patient-detail({'patient_id' : app.patient_id})"><h4>{{app.patient}} <span ng-if="app.concession_type!=null">({{app.concession_type}})</span></h4></a>
            </td>
            <td>
              {{!app.practitioner_name ? 'N/A' : app.practitioner_name}}
            </td>
            <td>
              {{!app.service_type ? 'N/A' : app.service_type}}
            </td>
            <td>
              {{!app.contact_no ? 'N/A' : app.contact_no}}
            </td>
            <td>
              {{!app.email ? 'N/A' : app.email}}              
            </td>
            <td>
              {{!app.locations ? 'N/A' : app.locations}}
            </td>
          </tr>
        </tbody>
       </table>
    </div>
  </div>
</div>